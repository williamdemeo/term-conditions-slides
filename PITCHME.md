## A poly-time test for difference terms in idempotent varieties

[William DeMeo &lt;williamdemeo@gmail.com&gt;](mailto:williamdemeo@gmail.com)  

joint work with 
[Ralph Freese](mailto:ralph@math.hawaii.edu)
& [Matt Valeriote](mailto:matt@math.mcmaster.ca)

<a style="color:#e7ad52">BLAST 2017 @ Vanderbilt<a style="color:#e7ad52">

---

## The Problem

<p class="fragment" align="left">
Can we efficiently decide whether a finite algebra $\mathbf{A}$ generates a variety with a difference term? </p>

<p class="fragment" align="left">
We will outline the proof that the answer is "yes" in the idempotent case. </p>

---

## Definition

A <a style="color:#e7ad52"><i>difference term</i></a> for $\mathcal{V}$ is a term $d$ satisfying, $\forall \; \mathbf A \in \mathcal V$ and $\forall a, b \in A$, 

$$d(a,a,b) = b \quad \text{ and } \quad
d(a,b,b) \mathrel{[\theta, \theta]} a$$

where $\theta$ is any congruence containing $(a,b)$ and $[\cdot, \cdot]$ is the *commutator*.

---

## Problem Statement

Is there a poly-time algorithm that takes a finite
idempotent algebra $\mathbf{A}$ and decides 
whether $\mathbb{V}(\mathbf{A})$ has a difference term?

<div class="fragment" align="left"><a style="color:#e7ad52">**Theorem**</a> (Kearnes, *J Algebra* 1995)   
$\mathbb{V}(\mathbf{A})$ has a difference term
$\Leftrightarrow$  $\mathbb{V}(\mathbf{A})$ omits type 1 and type-2 tails
</div>

<p class="fragment" align="left">
Omitting 1 is poly-time decidable by Valeriote's subtype theorem.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Reduced Problem**</a>   
Is there a poly-time algorithm that takes a finite 
idempotent algebra $\mathbf{A}$ and decides whether 
$\mathbb{V}(\mathbf{A})$ has nonempty type-2 tails?
</p>

---

## Strategy

<p class="fragment" align="left">
<a style="color:#e7ad52">*Kearnes:*</a>
Having a diff term is characterized by omitting 1's and type-2 tails.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">*Valeriote:*</a>
Omitting 1's is poly-time decidable by the subtype theorem.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">*To show:*</a> 
Nonempty type-2 tails, when they occur in $\mathbb{V}(\mathbf{A})$, 
are easy to find.
</p>

---

---?image=http://www.propinsanity.com/wp-content/uploads/2014/09/image.jpg

---

## Main Theorem

<p class="fragment" align="left">
Let $\mathbf A$ be a finite idempotent algebra.

Suppose $\mathbb{V}(\mathbf A)$ omits type 1 and contains a finite algebra $\mathbf{B}$ with a type-2 prime quotient $\alpha \prec \beta$ such that the $\langle \alpha, \beta \rangle$-minimal sets have nonempty tails.
</p>

<p class="fragment" align="left">
Then there exists a 3-generated subalgebra of $\mathbf A \times \mathbf A$
with this property. </p>
  
<p class="fragment" align="left">
<a style="color:#e7ad52">**Conclusion**</a>  
To check for type-2 tails in $\mathbb{V}(\mathbf A)$ it suffices to look in 3-generated subalgebras of $\mathbf A \times \mathbf A$.
</p>

---

## Notation

$[n] = \{ 0, 1, \dots, n-1 \}$

For $i < n$, define 
$\rho_i = \operatorname{ker} (\mathbf B \twoheadrightarrow \mathbf A_i)$.

For $s \subseteq [n]$, define $\rho_s = \bigwedge_s \rho_j$.


---

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 1.**</a>  
Suppose $U$ is an $\langle \alpha, \beta \rangle$-minimal set, and $0, 1 \in U$, 
and $(0,1) \in \beta - \alpha$, and
$t \in Tail(U)$.

Then $\beta = Cg(0,1)$ and $\mathbf B$ is generated by $\{0, 1, t\}$.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 2.**</a>  
For every $\emptyset \subset s \subset [n]$,
  either $\beta \leq \rho_s$ or $\alpha \vee \rho_s = 1_B$.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 3.**</a>  
$\forall \; \emptyset \subset s \subset [n], \quad
\forall \; v\in B, \quad \forall \; b\in Body(U)$,   
we have $(v,b) \in \beta \circ \rho_s \cap \rho_s \circ \beta$.
</p>

<p class="fragment" align="left">
<a style="color:#e7ad52">**Lemma 4.**</a>  
There exist $i$ and $j$ such that $\alpha \vee \rho_i = 1_B$ and $\alpha \vee \rho_j < 1_B$.
</p>


---

## Theorem

<p class="fragment" align="left">
Let $\mathcal V$ be the variety generated by a finite set $\mathcal S$ of finite idempotent algebras that is closed under taking subalgebras. 

Suppose $\mathcal V$ omits 1 and some finite member of $\mathcal V$ has a prime quotient of type 2 whose minimal sets have non-empty tails.
</p>

<p class="fragment" align="left">
Then there is some 3-generated algebra with this property that belongs to $\mathcal S$ or is a subdirect product of two algebras from $\mathcal S$. 
</p>

---

## Question

Is there a poly-time algorithm for producing a difference term when such a term is known to exist?